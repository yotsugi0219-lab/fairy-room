<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>妖精さん育成</title>
  <link rel="stylesheet" href="style.css?v=3" />
<style>
  .room{position:relative; max-width:720px; aspect-ratio:16/9; margin:16px auto; border-radius:16px; overflow:hidden; background:#0000;}
  .room img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block;}
  .fairy{width:22%; left:50%; top:58%; transform:translate(-50%,-50%);}
</style>
</head>
<body>
  <main class="app">

    <!-- お部屋（16:9で安定） -->
    <div class="room" id="room" aria-label="妖精さんの部屋">
      <!-- 背景レイヤ -->
      <img class="room-base layer" src="assets/room-base.png" alt="">
      <img id="sky" class="room-sky layer"
           src="assets/sky-day.png"
           data-day="assets/sky-day.png"
           data-night="assets/sky-night.png" alt="">
      <img class="room-window layer" src="assets/window-frame.png" alt="窓枠">

      <!-- 額縁の絵（ショップで解放） -->
      <img id="frameArt" class="frame-art layer hidden" src="assets/frame-default.png" alt="額の中身">

      <!-- 妖精さん（自分） -->
      <img id="fairy-stand" class="fairy layer" src="assets/fairy-stand.png" alt="妖精さん">
      <img id="fairy-happy" class="fairy layer hidden" src="assets/fairy-happy.png" alt="妖精さん（バンザイ）">

      <!-- お客さん（ゲスト） -->
      <img id="fairy-guest" class="fairy guest hidden" src="assets/fairy-guest1-stand.png" alt="お客さん">

      <!-- 吹き出し＆エフェクト -->
      <div id="bubble" class="bubble hidden"><p id="bubble-text">……</p></div>
      <div class="fx-layer" id="fx"></div>
    </div>

    <!-- パラメータ -->
    <section class="panel params">
      <div id="param-mood">ｺﾞｷｹﾞﾝ: ♥️♥️♥️♥️♥️</div>
      <div id="param-hunger">ｵﾅｶ: 🍬🍬🍬🍬🍬</div>
      <div id="param-sleep">ﾈﾑﾈﾑ: 💤💤💤💤💤</div>
    </section>

    <!-- コマンド -->
    <section class="panel commands">
      <button id="act-pet" class="pill">ﾅﾃﾞﾅﾃﾞ</button>
      <button id="act-snack" class="pill">ｵﾔﾂ</button>
      <button id="act-sleep" class="pill">ﾈﾝﾈ</button>
      <button id="act-guest" class="pill">ｵｷｬｸｻﾝ</button>
      <button id="act-adventure" class="pill">ﾎﾞｳｹﾝ</button>
      <button id="toggle-sky" class="pill">昼/夜</button>
      <button id="act-shop" class="pill">ｼｮｯﾌﾟ</button>
    </section>

    <!-- ステータス -->
    <section class="panel status">
      🌰<strong id="nuts">0</strong>
      <button id="save" class="pill">日記(ｾｰﾌﾞ)</button>
    </section>
  </main>

  <!-- ショップ（モーダル） -->
  <div id="shop" class="modal hidden" aria-hidden="true">
    <div class="modal-body">
      <div class="modal-head">
        <strong>ｼｮｯﾌﾟ</strong>
        <!-- “絶対閉じる”ルート：HTMLから直接呼ぶ -->
        <button id="shopClose" class="mini" type="button" onclick="closeShop()">とじる</button>
      </div>
      <div id="shopGrid" class="shop-grid"></div>
      <p class="note">🌰で額縁やパネル壁紙を買えるよ</p>
    </div>
  </div>

  <script src="script.js?v=2" defer></script>
</body>
</html>
